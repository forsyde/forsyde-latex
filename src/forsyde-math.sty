% A library with graphical primitives for SDF process networks
%
% Author: George Ungureanu, KTH - Royal Institute of Technology, Sweden
% Version: 0.3
% Date: 2017/02/27
\NeedsTeXFormat{LaTeX2e}
\RequirePackage{amsmath}  % for convenience
\RequirePackage{mathtools}  % for convenience
\RequirePackage{xparse}
\RequirePackage{xcolor}
\ProvidesPackage{forsyde-math}[2017/02/27 v0.3 ForSyDe Math Library]

%%%%%%%%%%%%%%%%
% Text symbols %
%%%%%%%%%%%%%%%%

\DeclareFontFamily{U}{forsydeatom}{}
\DeclareFontShape{U}{forsydeatom}{m}{n}{
  <-9>   forsydeatom8
  <9-14> forsydeatom10
  <14->  forsydeatom14
}{}

\newcommand{\textBhDef}{{\usefont{U}{forsydeatom}{m}{n}\char16}}
\newcommand{\textBhFun}{{\usefont{U}{forsydeatom}{m}{n}\char17}}
\newcommand{\textBhApp}{{\usefont{U}{forsydeatom}{m}{n}\char18}}
\newcommand{\textBhPhi}{{\usefont{U}{forsydeatom}{m}{n}\char19}}
\newcommand{\textBhDeg}{{\usefont{U}{forsydeatom}{m}{n}\char20}}

\newcommand{\textMocCmb}{{\usefont{U}{forsydeatom}{m}{n}\char32}}
\newcommand{\textMocFun}{{\usefont{U}{forsydeatom}{m}{n}\char33}}
\newcommand{\textMocApp}{{\usefont{U}{forsydeatom}{m}{n}\char34}}
\newcommand{\textMocPre}{{\usefont{U}{forsydeatom}{m}{n}\char35}}
\newcommand{\textMocPhi}{{\usefont{U}{forsydeatom}{m}{n}\char36}}
\newcommand{\textMocDel}{{\usefont{U}{forsydeatom}{m}{n}\char37}}

\newcommand{\textSkelFrm}{{\usefont{U}{forsydeatom}{m}{n}\char48}}
\newcommand{\textSkelPip}{{\usefont{U}{forsydeatom}{m}{n}\char49}}
\newcommand{\textSkelFun}{{\usefont{U}{forsydeatom}{m}{n}\char50}}
\newcommand{\textSkelApp}{{\usefont{U}{forsydeatom}{m}{n}\char51}}
\newcommand{\textSkelRed}{{\usefont{U}{forsydeatom}{m}{n}\char52}}
\newcommand{\textSkelRec}{{\usefont{U}{forsydeatom}{m}{n}\char53}}

%%%%%%%%%%%%%%%%
% Math symbols %
%%%%%%%%%%%%%%%%

\DeclareSymbolFont{atomoperators}{U}{forsydeatom}{m}{n}

\DeclareMathSymbol{\BhDef}{\mathbin}{atomoperators}{16}
\DeclareMathSymbol{\BhFun}{\mathbin}{atomoperators}{17}
\DeclareMathSymbol{\BhApp}{\mathbin}{atomoperators}{18}
\DeclareMathSymbol{\BhPhi}{\mathbin}{atomoperators}{19}
\DeclareMathSymbol{\BhDeg}{\mathbin}{atomoperators}{20}

\DeclareMathSymbol{\MocCmb}{\mathbin}{atomoperators}{32}
\DeclareMathSymbol{\MocFun}{\mathbin}{atomoperators}{33}
\DeclareMathSymbol{\MocApp}{\mathbin}{atomoperators}{34}
\DeclareMathSymbol{\MocPre}{\mathbin}{atomoperators}{35}
\DeclareMathSymbol{\MocPhi}{\mathbin}{atomoperators}{36}
\DeclareMathSymbol{\MocDel}{\mathbin}{atomoperators}{37}

\DeclareMathSymbol{\SkelFrm}{\mathbin}{atomoperators}{48}
\DeclareMathSymbol{\SkelPip}{\mathbin}{atomoperators}{49}
\DeclareMathSymbol{\SkelFun}{\mathbin}{atomoperators}{50}
\DeclareMathSymbol{\SkelApp}{\mathbin}{atomoperators}{51}
\DeclareMathSymbol{\SkelRed}{\mathbin}{atomoperators}{52}
\DeclareMathSymbol{\SkelRec}{\mathbin}{atomoperators}{53}

%%%%%%%%%%%%%%%%%
% Miscellaneous %
%%%%%%%%%%%%%%%%%

\newcommand\Constructor[2]{\mathtt{#1}_{\mkern-2mu#2}}
\newcommand\SkelCons[1]{\mathtt{#1}_{\mkern-2muS}}
\newcommand\MocCons[1]{\mathtt{#1}_{\mkern-2muM}}
\newcommand\BhCons[1]{\mathtt{#1}_{\mkern-2muB}}

\newcommand\id[1]{\mathit{#1}}


\newcommand\SkelVec[1]{\langle{#1}\rangle}
% \newcommand\wrapdf[1]{\overline{#1}}
\newcommand\doubleplus{\ensuremath{\mathbin{+\mkern-10mu+}}}

% \newcommand{\context}[3]{{\scriptstyle #1 \vdash } #2}
% \newcommand{\optcontext}[2]{\fopt{#1\!\vdash} #2}


\NewDocumentCommand\context{ s m m }{%
  \IfBooleanTF#1{{\color{black!50}\scriptstyle #2 \vdash } #3}{{\scriptstyle #2 \vdash } #3}%
}
